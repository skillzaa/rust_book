<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ownership</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../welcome.html">Welcome</a></li><li class="chapter-item expanded affix "><a href="../faqs/questions.html">FAQs</a></li><li class="chapter-item expanded affix "><li class="part-title">Rust Basics</li><li class="spacer"></li><li class="chapter-item expanded "><a href="../basics/printing_arrays.html"><strong aria-hidden="true">1.</strong> Printing arrays</a></li><li class="chapter-item expanded "><a href="../basics/vectors_in_rust_part1.html"><strong aria-hidden="true">2.</strong> Vectors in Rust Part1</a></li><li class="chapter-item expanded "><a href="../basics/vectors_in_rust_part2.html"><strong aria-hidden="true">3.</strong> Vectors in Rust Part2</a></li><li class="chapter-item expanded "><a href="../basics/vectors_in_rust_part3.html"><strong aria-hidden="true">4.</strong> Vectors in Rust Part3</a></li><li class="chapter-item expanded "><a href="../basics/custom_error_type.html"><strong aria-hidden="true">5.</strong> Custom Error Type</a></li><li class="chapter-item expanded "><a href="../basics/duration_between_two_points_of_time.html"><strong aria-hidden="true">6.</strong> Duration Between Points of Time</a></li><li class="chapter-item expanded "><a href="../basics/hashmap01.html"><strong aria-hidden="true">7.</strong> Hashmap 01</a></li><li class="chapter-item expanded "><a href="../basics/hashmap02.html"><strong aria-hidden="true">8.</strong> Hashmap 02</a></li><li class="chapter-item expanded "><a href="../basics/result_consumed.html"><strong aria-hidden="true">9.</strong> Result Consumed</a></li><li class="chapter-item expanded "><a href="../basics/some_none_example.html"><strong aria-hidden="true">10.</strong> Some None Example</a></li><li class="chapter-item expanded "><a href="../basics/struct_impl_example.html"><strong aria-hidden="true">11.</strong> Struct Impl Example</a></li><li class="chapter-item expanded "><a href="../basics/struct_impl02_example.html"><strong aria-hidden="true">12.</strong> Struct Impl Example-02</a></li><li class="chapter-item expanded "><a href="../basics/struct_printing.html"><strong aria-hidden="true">13.</strong> Struct Printing</a></li><li class="chapter-item expanded "><a href="../basics/struct_to_function.html"><strong aria-hidden="true">14.</strong> Sending Struct to a Function</a></li><li class="chapter-item expanded "><a href="../basics/system_time.html"><strong aria-hidden="true">15.</strong> System Time / Time Stamp</a></li><li class="chapter-item expanded "><a href="../basics/thread_sleep.html"><strong aria-hidden="true">16.</strong> Thread Sleep</a></li><li class="chapter-item expanded "><a href="../basics/documentation.html"><strong aria-hidden="true">17.</strong> Documentation</a></li><li class="chapter-item expanded "><a href="../basics/helpful_git_commands.html"><strong aria-hidden="true">18.</strong> Helpful git commands</a></li><li class="chapter-item expanded "><a href="../basics/creating_file.html"><strong aria-hidden="true">19.</strong> Creating File</a></li><li class="chapter-item expanded "><a href="../basics/reading_file.html"><strong aria-hidden="true">20.</strong> Reading File</a></li><li class="chapter-item expanded "><a href="../basics/serde02.html"><strong aria-hidden="true">21.</strong> Serde json</a></li><li class="chapter-item expanded "><a href="../basics/ownership.html" class="active"><strong aria-hidden="true">22.</strong> Ownership</a></li><li class="chapter-item expanded "><a href="../basics/slices.html"><strong aria-hidden="true">23.</strong> Slices</a></li><li class="chapter-item expanded "><a href="../basics/learnings.html"><strong aria-hidden="true">24.</strong> Learning 2021-Oct-28 </a></li><li class="chapter-item expanded "><a href="../basics/one_line_life_savers.html"><strong aria-hidden="true">25.</strong> One line life savers</a></li><li class="chapter-item expanded "><a href="../basics/reading_dir.html"><strong aria-hidden="true">26.</strong> Reading a Directory</a></li><li class="chapter-item expanded "><a href="../basics/if_let.html"><strong aria-hidden="true">27.</strong> If let</a></li><li class="chapter-item expanded "><a href="../basics/collections.html"><strong aria-hidden="true">28.</strong> Collections</a></li><li class="chapter-item expanded "><a href="../basics/iter_into_iter_iter_mut.html"><strong aria-hidden="true">29.</strong> Difference between iter(), into_iter(), and iter_mut()</a></li><li class="chapter-item expanded affix "><li class="part-title">Rought Notes</li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../misc/2021_oct_21_graphics.html">State of Multimedia Programming</a></li><li class="chapter-item expanded affix "><a href="../rough_notes/2021-oct-15-notes.html">2021-oct-15 Notes</a></li><li class="chapter-item expanded affix "><a href="../rough_notes/2021-oct-16-traits.html">2021-oct-16 Traits in Rust</a></li><li class="chapter-item expanded affix "><a href="../rough_notes/2021-oct-18-notes.html">2021-oct-18 Notes</a></li><li class="chapter-item expanded affix "><a href="../rough_notes/2021-oct-30.html">2021-oct-30 Notes</a></li><li class="chapter-item expanded affix "><a href="../rough_notes/2021-oct-25-wiz.html">2021-oct-25 Wiz</a></li><li class="chapter-item expanded affix "><a href="../faqs/questions.html">FAQs</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#ownership" id="ownership">Ownership</a></h1>
<h3><a class="header" href="#ownership-rules" id="ownership-rules">Ownership Rules</a></h3>
<ol>
<li>Each value in Rust has a variable that’s called its owner.</li>
<li>There can only be one owner at a time.</li>
<li>When the owner goes out of scope, the value will be dropped.</li>
</ol>
<hr />
<p>We can consider <strong>String</strong> as a vector of chars. A String is always placed on <em>heap</em> that is why it can grow and shrink.
The ownership model is not much visible on variables placed on stack(mostly primtives) since it is inexpensive to copy them.</p>
<p><strong>String Literals</strong> ie <em>&amp;str</em> is not mutable. It is written in the code so can not be changed, however you can make copies of it and then change those.
To convert string from string literal</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from(&quot;hello&quot;);
or
let t = &quot;hello&quot;.to_string();
<span class="boring">}
</span></code></pre></pre>
<p>Here we have declared a string literal, also known as a string slice.</p>
<p>String literals have a static lifetime, which means the string hello_world is guaranteed to be valid for the duration of the entire program. We can explicitly specify hello_world’s lifetime as well:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let hello_world: &amp;'static str = &quot;Hello, world!&quot;;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>How Rust creates a deep clone of a data structure ?</p>
</blockquote>
<h3><a class="header" href="#the-copy-trait" id="the-copy-trait">The Copy trait</a></h3>
<p>If a type implements the Copy trait, an older variable is still usable after assignment.</p>
<p>Rust won’t let us annotate a type with the Copy trait if the type, or any of its parts, has implemented the Drop trait. </p>
<p>If the type needs something special to happen when the value goes out of scope and we add the Copy annotation to that type, we’ll get a compile-time error.</p>
<p>So what types implement the Copy trait? </p>
<p>You can check the documentation for the given type to be sure, but as a general rule, any group of simple scalar values can implement Copy, and nothing that requires allocation or is some form of resource can implement Copy. Here are some of the types that implement Copy:</p>
<ul>
<li>All the integer types, such as u32.</li>
<li>The Boolean type, bool, with values true and false.</li>
<li>All the floating point types, such as f64.</li>
<li>The character type, char.</li>
<li>Tuples, if they only contain types that also implement Copy. </li>
</ul>
<p>For example, (i32, i32) implements Copy, but (i32, String) does not.</p>
<p>The semantics for passing a value to a function are similar to those for assigning a value to a variable. Passing a variable to a function will move or copy, just as assignment does.</p>
<p>Returning values can also transfer ownership.</p>
<blockquote>
<p>The ownership of a variable follows the same pattern every time: assigning a value to another variable moves it. When a variable that includes data on the heap goes out of scope, the value will be cleaned up by drop unless the data has been moved to be owned by another variable.</p>
</blockquote>
<p>It’s possible to return multiple values from a function using a tuple.</p>
<p>The &amp;s1 syntax lets us create a reference that refers to the value of s1 but does not own it. Because it does not own it, the value it points to will not be dropped when the reference stops being used.</p>
<p>We can have a mutable reference borrow.But mutable references have one big restriction: you can have only one mutable reference to a particular piece of data at a time. </p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut s = String::from(&quot;hello&quot;);

    change(&amp;mut s);
}

fn change(some_string: &amp;mut String) {
    some_string.push_str(&quot;, world&quot;);
}
</code></pre></pre>
<p>If the reference is not mutable we can have as many copies as we want.</p>
<h3><a class="header" href="#dangling-references" id="dangling-references">Dangling References</a></h3>
<p>Following code creats a dangling pointer</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let reference_to_nothing = dangle();
}

fn dangle() -&gt; &amp;String {
    let s = String::from(&quot;hello&quot;);

    &amp;s
}
</code></pre></pre>
<p>Here is the correct code (Other than the main fn other smaller fn should return ownership)</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn no_dangle() -&gt; String {
    let s = String::from(&quot;hello&quot;);

    s
}
<span class="boring">}
</span></code></pre></pre>
<h3><a class="header" href="#the-rules-of-references" id="the-rules-of-references">The Rules of References</a></h3>
<ul>
<li>At any given time, you can have either one mutable reference or any number of immutable references.</li>
<li>References must always be valid.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../basics/serde02.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../basics/slices.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../basics/serde02.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../basics/slices.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
